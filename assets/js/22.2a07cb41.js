(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{521:function(s,a,t){"use strict";t.r(a);var e=t(16),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"vue2-elm项目升级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue2-elm项目升级"}},[s._v("#")]),s._v(" Vue2-Elm项目升级")]),s._v(" "),t("h3",{attrs:{id:"准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[s._v("#")]),s._v(" 准备工作")]),s._v(" "),t("p",[s._v("项目源码："),t("a",{attrs:{href:"https://github.com/bailicangdu/vue2-elm",target:"_blank",rel:"noopener noreferrer"}},[s._v("vue2-elm:基于 vue2 + vuex 构建一个具有 45 个页面的大型单页面应用 "),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("安装依赖和运行")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("npm install\nnpm run dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"构建源码分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建源码分析"}},[s._v("#")]),s._v(" 构建源码分析")]),s._v(" "),t("p",[s._v("构建核心源码")]),s._v(" "),t("ul",[t("li",[s._v("build\n"),t("ul",[t("li",[s._v("build.js 打包执行文件")]),s._v(" "),t("li",[s._v("webpack.base.conf.js 项目配置公共文件")]),s._v(" "),t("li",[s._v("webpack.dev.conf.js 项目启动配置文件")]),s._v(" "),t("li",[s._v("webpack.dll.conf.js dll插件抽离第三方库配置文件")])])]),s._v(" "),t("li",[s._v("config\n"),t("ul",[t("li",[s._v("开发和线上环境的配置文件")])])])]),s._v(" "),t("p",[s._v("构建源码分析："),t("a",{attrs:{href:"https://mzc28y.yuque.com/mzc28y/pp2zs1/uq9g9i",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://mzc28y.yuque.com/mzc28y/pp2zs1/uq9g9i"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"项目需求分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目需求分析"}},[s._v("#")]),s._v(" 项目需求分析")]),s._v(" "),t("p",[s._v("第一阶段：vue升级改造，对项目中的vue全家桶插件进行升级")]),s._v(" "),t("p",[s._v("第二阶段：webpack打包改造，对项目中现有的打包进行改造升级")]),s._v(" "),t("p",[s._v("第三阶段：项目打包构建优化，对项目的构建速度和打包体积进行优化")]),s._v(" "),t("h3",{attrs:{id:"vue-cli2构建分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli2构建分析"}},[s._v("#")]),s._v(" vue-cli2构建分析")]),s._v(" "),t("p",[s._v("开发模式构建源码，脚本如下")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dev"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cross-env NODE_ENV=online node build/dev-server.js"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("执行流程分析")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://fastly.jsdelivr.net/gh/Amadeus9029/ViliviliBlogImg@gh-pages/frontEnd/20221201215723.png",alt:"image-20221129143956057"}})]),s._v(" "),t("h3",{attrs:{id:"express的核心概念-中间件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#express的核心概念-中间件"}},[s._v("#")]),s._v(" express的核心概念——中间件")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("路由中间件")])]),s._v(" "),t("li",[t("p",[s._v("异常中间件")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("异常中间件全局只包含一个")])]),s._v(" "),t("li",[t("p",[s._v("异常中间件可以传递给普通中间件")])]),s._v(" "),t("li",[t("p",[s._v("异常中间件需要放在所有中间件的最后")])]),s._v(" "),t("li",[t("p",[s._v("异常中间件只能捕获回调函数中的异常")])]),s._v(" "),t("li",[t("p",[s._v("全局异常捕获中间件和全局Promise异常捕获中间件")])])])])]),s._v(" "),t("h3",{attrs:{id:"核心中间件-webpack-dev-middleware"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#核心中间件-webpack-dev-middleware"}},[s._v("#")]),s._v(" 核心中间件 webpack-dev-middleware")]),s._v(" "),t("p",[s._v("作用：将磁盘的数据存储到内存中")]),s._v(" "),t("p",[s._v("shared方法很重要")]),s._v(" "),t("p",[s._v("使用memory-fs将磁盘数据转存到内存中")]),s._v(" "),t("h3",{attrs:{id:"核心中间件-webpack-hot-middleware"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#核心中间件-webpack-hot-middleware"}},[s._v("#")]),s._v(" 核心中间件 webpack-hot-middleware")]),s._v(" "),t("p",[s._v("作用：实现热部署")]),s._v(" "),t("p",[s._v("复杂点：")]),s._v(" "),t("p",[s._v("1.客户端和服务端同时配合实现 HotModuleReplacementPlugin")]),s._v(" "),t("p",[s._v("2.客户端和服务端双向通信")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://fastly.jsdelivr.net/gh/Amadeus9029/ViliviliBlogImg@gh-pages/frontEnd/20221201215849.png",alt:"image-20221130194601340"}})]),s._v(" "),t("h3",{attrs:{id:"第一阶段-vue升级改造"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一阶段-vue升级改造"}},[s._v("#")]),s._v(" 第一阶段：Vue升级改造")]),s._v(" "),t("h4",{attrs:{id:"vue3和vue2对比"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue3和vue2对比"}},[s._v("#")]),s._v(" Vue3和Vue2对比")]),s._v(" "),t("h5",{attrs:{id:"vue2的缺陷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue2的缺陷"}},[s._v("#")]),s._v(" vue2的缺陷")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("vue2代码复用困难，vue2的代码复用方式有Mixin,但容易出现命名冲突，且无法解决业务逻辑复用")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://fastly.jsdelivr.net/gh/Amadeus9029/ViliviliBlogImg@gh-pages/frontEnd/20221201215917.png",alt:"image-20221130223204527"}})])]),s._v(" "),t("li",[t("p",[s._v("vue2对于TypeScript的支持不足")])]),s._v(" "),t("li",[t("p",[s._v("vue2内部实现过度依赖this,导致无法进行treeshaking")])])]),s._v(" "),t("h5",{attrs:{id:"vue3的优势"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue3的优势"}},[s._v("#")]),s._v(" vue3的优势")]),s._v(" "),t("ul",[t("li",[s._v("vue3支持vue2的大多数特性，能够实现对vue2的向下兼容。")]),s._v(" "),t("li",[s._v("vue3对比vue2具有明显的性能提升\n"),t("ul",[t("li",[s._v("打包大小减少41%。")]),s._v(" "),t("li",[s._v("初次渲染快55%，更新快133%。")]),s._v(" "),t("li",[s._v("内存使用减少54%。")])])]),s._v(" "),t("li",[s._v("vue3具有的composition API实现逻辑模块化和重用")]),s._v(" "),t("li",[s._v("vue3.2通过setup语法糖进一步简化开发，可以编写更加优雅的代码0vue3脚手架默认实现对typescript的支持")]),s._v(" "),t("li",[s._v("增加了很多新特性，如: Fragmet、Teleport、Suspense")])]),s._v(" "),t("h4",{attrs:{id:"vue全家桶依赖升级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue全家桶依赖升级"}},[s._v("#")]),s._v(" vue全家桶依赖升级")]),s._v(" "),t("div",{staticClass:"language-plain text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-plain"}},[t("code",[s._v('"vue":"^2.1.0",\n"vue-router":"^2.1.1",\n"vuex":"^2.0.0"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"language-plain text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-plain"}},[t("code",[s._v('"vue":"^3.0.0",\n"vue-router":"^4.0.0-0",\n"vuex":"^4.0.0-0"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"language-Json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@vue/cli-service"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5.0.0-beta.2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@vue/compiler-sfc"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.2.6"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"sass"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.49.7"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"sass-loader"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^12.4.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"webpack"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^5.50.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"webpack-cli"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^4.9.2"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("vue.config.js中使用configureWebpack可以对webpack进行配置。通过alias可以把src路径映射到指定的路径。")]),s._v(" "),t("h4",{attrs:{id:"vuex和vue-router语法升级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vuex和vue-router语法升级"}},[s._v("#")]),s._v(" vuex和vue-router语法升级")]),s._v(" "),t("p",[s._v("vuex从实例化vuex.store对象变为createStore，实现了解构，能够减少打包大小。")]),s._v(" "),t("p",[s._v("vue-router从实例化Router对象变成了{createRouter,createWebHistory}")]),s._v(" "),t("p",[s._v("vue从实例化Vue对象变成了createApp方法")]),s._v(" "),t("h4",{attrs:{id:"vuex移植"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vuex移植"}},[s._v("#")]),s._v(" vuex移植")]),s._v(" "),t("p",[s._v("更新vuex配置：修改项目中vuex的配置")]),s._v(" "),t("h4",{attrs:{id:"移植首页"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#移植首页"}},[s._v("#")]),s._v(" 移植首页")]),s._v(" "),t("h4",{attrs:{id:"vue3语法升级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue3语法升级"}},[s._v("#")]),s._v(" vue3语法升级")]),s._v(" "),t("p",[s._v("setup()方法")]),s._v(" "),t("p",[s._v("ref()、reactive()、computed()")]),s._v(" "),t("p",[s._v("useStore、useRouter、useRoute")]),s._v(" "),t("p",[s._v("setup语法糖,在script标签中加入setup,不需要在export default了，直接把setup()方法中的写在script中即可")]),s._v(" "),t("h3",{attrs:{id:"第二阶段-webpack打包改造"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二阶段-webpack打包改造"}},[s._v("#")]),s._v(" 第二阶段：Webpack打包改造")]),s._v(" "),t("h4",{attrs:{id:"webpack5新特性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack5新特性"}},[s._v("#")]),s._v(" Webpack5新特性")]),s._v(" "),t("p",[s._v("构建结果不同")]),s._v(" "),t("p",[s._v("不管多么简单的代码，webpack4构建的代码量都挺多且复杂")]),s._v(" "),t("p",[s._v("对于简单的代码，webpack5构建的代码也会非常简单，构建思路上与4有一定的区别")]),s._v(" "),t("p",[s._v("缓存机制不同")]),s._v(" "),t("ul",[t("li",[s._v("webpack5 比 webpack4 的文件压缩策略更优，分割文件后的 vendor 体积缩小。")]),s._v(" "),t("li",[s._v("webpack5 缓存构建性优优于 webpack4。")]),s._v(" "),t("li",[s._v("webpack5缓存的功能显著优于webpack4。")])]),s._v(" "),t("h4",{attrs:{id:"低版本的webpack可以使用hard-source-webpack-plugin提升缓存性能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#低版本的webpack可以使用hard-source-webpack-plugin提升缓存性能"}},[s._v("#")]),s._v(" 低版本的webpack可以使用hard-source-webpack-plugin提升缓存性能")]),s._v(" "),t("h3",{attrs:{id:"第三阶段-项目打包构建优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三阶段-项目打包构建优化"}},[s._v("#")]),s._v(" 第三阶段：项目打包构建优化")]),s._v(" "),t("ul",[t("li",[s._v("查找并诊断性能瓶颈\n"),t("ul",[t("li",[s._v("构建速度分析:影响构建性能和开发效率")]),s._v(" "),t("li",[s._v("构建体积分析:影响页面访问性能")])])]),s._v(" "),t("li",[s._v("构建性能优化常用方法\n"),t("ul",[t("li",[s._v("通过"),t("strong",[s._v("多进程")]),s._v("加快构建速度")]),s._v(" "),t("li",[s._v("通过"),t("strong",[s._v("分包")]),s._v("减小构建目标容量")]),s._v(" "),t("li",[s._v("减少"),t("strong",[s._v("构建目标")]),s._v("加快构建速度")])])])]),s._v(" "),t("h4",{attrs:{id:"构建速度分析-speed-measure-webpack-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建速度分析-speed-measure-webpack-plugin"}},[s._v("#")]),s._v(" 构建速度分析 speed-measure-webpack-plugin")]),s._v(" "),t("p",[s._v("在vue.config.js中使用")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" SpeedMeasurePlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'speed-measure-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" smp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpeedMeasurePlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("disable")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MEASURE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//是否启动")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("outputFormat")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'humanVerbose'")]),s._v("\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//输出格式")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("configureWebpack")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("smp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wrap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"构建体积分析-webpack-bundle-analyzer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建体积分析-webpack-bundle-analyzer"}},[s._v("#")]),s._v(" 构建体积分析 webpack-bundle-analyzer")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" BundleAnalyzerPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack-bundle-analyzer'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BundleAnalyzerPlugin\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BundleAnalyzerPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"多进程-多实例构建-资源并行解析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多进程-多实例构建-资源并行解析"}},[s._v("#")]),s._v(" 多进程/多实例构建（资源并行解析）")]),s._v(" "),t("p",[s._v("thread-loader(官方推荐)")]),s._v(" "),t("p",[s._v("每一个worker都是一个独立的进程，开辟需要耗费600ms左右的时间。同时会限制跨进程交换。")]),s._v(" "),t("p",[t("strong",[s._v("仅在耗时的操作中使用此loader!")])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("const module.exports = "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    configureWebpack"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" /\\.js$/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                exclude"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" /node_modules/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'thread-loader'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        worker"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("上述配置也有简化配置方法")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("const module.exports = "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    configureWebpack"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       parallel"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"webpack5分包策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack5分包策略"}},[s._v("#")]),s._v(" webpack5分包策略")]),s._v(" "),t("h4",{attrs:{id:"分包dllplugin-dllreferenceplugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分包dllplugin-dllreferenceplugin"}},[s._v("#")]),s._v(" 分包DllPlugin&DllReferencePlugin")]),s._v(" "),t("p",[s._v("分包的具体步骤:")]),s._v(" "),t("ul",[t("li",[s._v("分包:定义webpack.dll.config,js，使用DllPlugin配置分包，定义scripts命令，执行命令，完成分包。")]),s._v(" "),t("li",[s._v("排除分包: 在vue.config.js中，使用"),t("strong",[s._v("DIIReferencePlugin")]),s._v("引用manifest文件排除分包")]),s._v(" "),t("li",[s._v("拷贝dll:将dIl拷贝至项目目录下")]),s._v(" "),t("li",[s._v("引用dll:使用"),t("strong",[s._v("add-asset-html-webpack-plugin")]),s._v("引用dll分包文件")])]),s._v(" "),t("h4",{attrs:{id:"利用缓存提升二次构建速度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#利用缓存提升二次构建速度"}},[s._v("#")]),s._v(" 利用缓存提升二次构建速度")]),s._v(" "),t("p",[s._v("vue.config.js的配置如下")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("const module.exports = "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    configureWebpack"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       cache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n           type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 'filesystem'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n           cacheDirectory"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path.reolve(__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("'./node_modules/.cache_temp')\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"图片压缩-image-webpack-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#图片压缩-image-webpack-loader"}},[s._v("#")]),s._v(" 图片压缩 image-webpack-loader")]),s._v(" "),t("p",[s._v("vue.config.js的配置如下")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("const module.exports = "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    configureWebpack"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("/\\.(gif|png|jpe?g|svg|webp)$/i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("'image-webpack-loader'"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        mozjpeg"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                            progressive"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                            quality"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65")]),s._v("\n                        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h4",{attrs:{id:"删除css未使用内容purgecss-webpack-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除css未使用内容purgecss-webpack-plugin"}},[s._v("#")]),s._v(" 删除css未使用内容purgecss-webpack-plugin")]),s._v(" "),t("p",[s._v("vue.config.js的配置如下")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" PurgeCssWebpackPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'purgecss-webpack-plugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("configureWebpack")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PurgeCssWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("paths")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("glob"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PATHS")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("nodir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);